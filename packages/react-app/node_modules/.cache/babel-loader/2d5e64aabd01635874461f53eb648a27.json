{"ast":null,"code":"'use strict';\n\nconst CID = require('cids');\n\nconst errCode = require('err-code');\n\nconst resolve = async (cid, name, path, toResolve, resolve, depth, ipld, options) => {\n  const node = await ipld.get(cid, options);\n  let subObject = node;\n  let subPath = path;\n\n  while (toResolve.length) {\n    const prop = toResolve[0];\n\n    if (prop in subObject) {\n      // remove the bit of the path we have resolved\n      toResolve.shift();\n      subPath = `${subPath}/${prop}`;\n\n      if (CID.isCID(subObject[prop])) {\n        return {\n          entry: {\n            name,\n            path,\n            cid,\n            node,\n            depth\n          },\n          next: {\n            cid: subObject[prop],\n            name: prop,\n            path: subPath,\n            toResolve\n          }\n        };\n      }\n\n      subObject = subObject[prop];\n    } else {\n      // cannot resolve further\n      throw errCode(new Error(`No property named ${prop} found in cbor node ${cid.toBaseEncodedString()}`), 'ERR_NO_PROP');\n    }\n  }\n\n  return {\n    entry: {\n      name,\n      path,\n      cid,\n      node,\n      depth\n    }\n  };\n};\n\nmodule.exports = resolve;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/ipfs-unixfs-exporter/src/resolvers/dag-cbor.js"],"names":["CID","require","errCode","resolve","cid","name","path","toResolve","depth","ipld","options","node","get","subObject","subPath","length","prop","shift","isCID","entry","next","Error","toBaseEncodedString","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,UAAD,CAAvB;;AAEA,MAAME,OAAO,GAAG,OAAOC,GAAP,EAAYC,IAAZ,EAAkBC,IAAlB,EAAwBC,SAAxB,EAAmCJ,OAAnC,EAA4CK,KAA5C,EAAmDC,IAAnD,EAAyDC,OAAzD,KAAqE;AACnF,QAAMC,IAAI,GAAG,MAAMF,IAAI,CAACG,GAAL,CAASR,GAAT,EAAcM,OAAd,CAAnB;AACA,MAAIG,SAAS,GAAGF,IAAhB;AACA,MAAIG,OAAO,GAAGR,IAAd;;AAEA,SAAOC,SAAS,CAACQ,MAAjB,EAAyB;AACvB,UAAMC,IAAI,GAAGT,SAAS,CAAC,CAAD,CAAtB;;AAEA,QAAIS,IAAI,IAAIH,SAAZ,EAAuB;AACrB;AACAN,MAAAA,SAAS,CAACU,KAAV;AACAH,MAAAA,OAAO,GAAI,GAAEA,OAAQ,IAAGE,IAAK,EAA7B;;AAEA,UAAIhB,GAAG,CAACkB,KAAJ,CAAUL,SAAS,CAACG,IAAD,CAAnB,CAAJ,EAAgC;AAC9B,eAAO;AACLG,UAAAA,KAAK,EAAE;AACLd,YAAAA,IADK;AAELC,YAAAA,IAFK;AAGLF,YAAAA,GAHK;AAILO,YAAAA,IAJK;AAKLH,YAAAA;AALK,WADF;AAQLY,UAAAA,IAAI,EAAE;AACJhB,YAAAA,GAAG,EAAES,SAAS,CAACG,IAAD,CADV;AAEJX,YAAAA,IAAI,EAAEW,IAFF;AAGJV,YAAAA,IAAI,EAAEQ,OAHF;AAIJP,YAAAA;AAJI;AARD,SAAP;AAeD;;AAEDM,MAAAA,SAAS,GAAGA,SAAS,CAACG,IAAD,CAArB;AACD,KAxBD,MAwBO;AACL;AACA,YAAMd,OAAO,CAAC,IAAImB,KAAJ,CAAW,qBAAoBL,IAAK,uBAAsBZ,GAAG,CAACkB,mBAAJ,EAA0B,EAApF,CAAD,EAAyF,aAAzF,CAAb;AACD;AACF;;AAED,SAAO;AACLH,IAAAA,KAAK,EAAE;AACLd,MAAAA,IADK;AAELC,MAAAA,IAFK;AAGLF,MAAAA,GAHK;AAILO,MAAAA,IAJK;AAKLH,MAAAA;AALK;AADF,GAAP;AASD,CA/CD;;AAiDAe,MAAM,CAACC,OAAP,GAAiBrB,OAAjB","sourcesContent":["'use strict'\n\nconst CID = require('cids')\nconst errCode = require('err-code')\n\nconst resolve = async (cid, name, path, toResolve, resolve, depth, ipld, options) => {\n  const node = await ipld.get(cid, options)\n  let subObject = node\n  let subPath = path\n\n  while (toResolve.length) {\n    const prop = toResolve[0]\n\n    if (prop in subObject) {\n      // remove the bit of the path we have resolved\n      toResolve.shift()\n      subPath = `${subPath}/${prop}`\n\n      if (CID.isCID(subObject[prop])) {\n        return {\n          entry: {\n            name,\n            path,\n            cid,\n            node,\n            depth\n          },\n          next: {\n            cid: subObject[prop],\n            name: prop,\n            path: subPath,\n            toResolve\n          }\n        }\n      }\n\n      subObject = subObject[prop]\n    } else {\n      // cannot resolve further\n      throw errCode(new Error(`No property named ${prop} found in cbor node ${cid.toBaseEncodedString()}`), 'ERR_NO_PROP')\n    }\n  }\n\n  return {\n    entry: {\n      name,\n      path,\n      cid,\n      node,\n      depth\n    }\n  }\n}\n\nmodule.exports = resolve\n"]},"metadata":{},"sourceType":"script"}