{"ast":null,"code":"var nextTick = require('./next-tick');\n\nfunction AbstractChainedBatch(db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store');\n  }\n\n  this.db = db;\n  this._operations = [];\n  this._written = false;\n}\n\nAbstractChainedBatch.prototype._checkWritten = function () {\n  if (this._written) {\n    throw new Error('write() already called on this batch');\n  }\n};\n\nAbstractChainedBatch.prototype.put = function (key, value) {\n  this._checkWritten();\n\n  var err = this.db._checkKey(key) || this.db._checkValue(value);\n\n  if (err) throw err;\n  key = this.db._serializeKey(key);\n  value = this.db._serializeValue(value);\n\n  this._put(key, value);\n\n  return this;\n};\n\nAbstractChainedBatch.prototype._put = function (key, value) {\n  this._operations.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n};\n\nAbstractChainedBatch.prototype.del = function (key) {\n  this._checkWritten();\n\n  var err = this.db._checkKey(key);\n\n  if (err) throw err;\n  key = this.db._serializeKey(key);\n\n  this._del(key);\n\n  return this;\n};\n\nAbstractChainedBatch.prototype._del = function (key) {\n  this._operations.push({\n    type: 'del',\n    key: key\n  });\n};\n\nAbstractChainedBatch.prototype.clear = function () {\n  this._checkWritten();\n\n  this._clear();\n\n  return this;\n};\n\nAbstractChainedBatch.prototype._clear = function () {\n  this._operations = [];\n};\n\nAbstractChainedBatch.prototype.write = function (options, callback) {\n  this._checkWritten();\n\n  if (typeof options === 'function') {\n    callback = options;\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('write() requires a callback argument');\n  }\n\n  if (typeof options !== 'object' || options === null) {\n    options = {};\n  }\n\n  this._written = true;\n\n  this._write(options, callback);\n};\n\nAbstractChainedBatch.prototype._write = function (options, callback) {\n  this.db._batch(this._operations, options, callback);\n}; // Expose browser-compatible nextTick for dependents\n\n\nAbstractChainedBatch.prototype._nextTick = nextTick;\nmodule.exports = AbstractChainedBatch;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/level-packager/node_modules/abstract-leveldown/abstract-chained-batch.js"],"names":["nextTick","require","AbstractChainedBatch","db","TypeError","_operations","_written","prototype","_checkWritten","Error","put","key","value","err","_checkKey","_checkValue","_serializeKey","_serializeValue","_put","push","type","del","_del","clear","_clear","write","options","callback","_write","_batch","_nextTick","module","exports"],"mappings":"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","sourcesContent":["var nextTick = require('./next-tick')\n\nfunction AbstractChainedBatch (db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store')\n  }\n\n  this.db = db\n  this._operations = []\n  this._written = false\n}\n\nAbstractChainedBatch.prototype._checkWritten = function () {\n  if (this._written) {\n    throw new Error('write() already called on this batch')\n  }\n}\n\nAbstractChainedBatch.prototype.put = function (key, value) {\n  this._checkWritten()\n\n  var err = this.db._checkKey(key) || this.db._checkValue(value)\n  if (err) throw err\n\n  key = this.db._serializeKey(key)\n  value = this.db._serializeValue(value)\n\n  this._put(key, value)\n\n  return this\n}\n\nAbstractChainedBatch.prototype._put = function (key, value) {\n  this._operations.push({ type: 'put', key: key, value: value })\n}\n\nAbstractChainedBatch.prototype.del = function (key) {\n  this._checkWritten()\n\n  var err = this.db._checkKey(key)\n  if (err) throw err\n\n  key = this.db._serializeKey(key)\n  this._del(key)\n\n  return this\n}\n\nAbstractChainedBatch.prototype._del = function (key) {\n  this._operations.push({ type: 'del', key: key })\n}\n\nAbstractChainedBatch.prototype.clear = function () {\n  this._checkWritten()\n  this._clear()\n\n  return this\n}\n\nAbstractChainedBatch.prototype._clear = function () {\n  this._operations = []\n}\n\nAbstractChainedBatch.prototype.write = function (options, callback) {\n  this._checkWritten()\n\n  if (typeof options === 'function') { callback = options }\n  if (typeof callback !== 'function') {\n    throw new Error('write() requires a callback argument')\n  }\n  if (typeof options !== 'object' || options === null) {\n    options = {}\n  }\n\n  this._written = true\n  this._write(options, callback)\n}\n\nAbstractChainedBatch.prototype._write = function (options, callback) {\n  this.db._batch(this._operations, options, callback)\n}\n\n// Expose browser-compatible nextTick for dependents\nAbstractChainedBatch.prototype._nextTick = nextTick\n\nmodule.exports = AbstractChainedBatch\n"]},"metadata":{},"sourceType":"script"}