{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _createForOfIteratorHelper = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _inherits = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _wrapNativeSuper = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar AggregateError = require('aggregate-error');\n\nvar PCancelable = require('p-cancelable');\n\nvar FilterError = /*#__PURE__*/function (_Error) {\n  _inherits(FilterError, _Error);\n\n  var _super = _createSuper(FilterError);\n\n  function FilterError() {\n    _classCallCheck(this, FilterError);\n\n    return _super.apply(this, arguments);\n  }\n\n  return FilterError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar pSome = function pSome(iterable, options) {\n  return new PCancelable(function (resolve, reject, onCancel) {\n    var count = options.count,\n        _options$filter = options.filter,\n        filter = _options$filter === void 0 ? function () {\n      return true;\n    } : _options$filter;\n\n    if (!Number.isFinite(count)) {\n      reject(new TypeError(\"Expected a finite number, got \".concat(typeof options.count)));\n      return;\n    }\n\n    var values = [];\n    var errors = [];\n    var elementCount = 0;\n    var isSettled = false;\n    var completed = new Set();\n\n    var maybeSettle = function maybeSettle() {\n      if (values.length === count) {\n        resolve(values);\n        isSettled = true;\n      }\n\n      if (elementCount - errors.length < count) {\n        reject(new AggregateError(errors));\n        isSettled = true;\n      }\n\n      return isSettled;\n    };\n\n    var cancelPending = function cancelPending() {\n      var _iterator = _createForOfIteratorHelper(iterable),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var promise = _step.value;\n\n          if (!completed.has(promise) && typeof promise.cancel === 'function') {\n            promise.cancel();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    };\n\n    onCancel(cancelPending);\n\n    var _iterator2 = _createForOfIteratorHelper(iterable),\n        _step2;\n\n    try {\n      var _loop = function _loop() {\n        var element = _step2.value;\n        elementCount++;\n\n        _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var value;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return element;\n\n                case 3:\n                  value = _context.sent;\n\n                  if (!isSettled) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  return _context.abrupt(\"return\");\n\n                case 6:\n                  if (filter(value)) {\n                    _context.next = 8;\n                    break;\n                  }\n\n                  throw new FilterError('Value does not satisfy filter');\n\n                case 8:\n                  values.push(value);\n                  _context.next = 14;\n                  break;\n\n                case 11:\n                  _context.prev = 11;\n                  _context.t0 = _context[\"catch\"](0);\n                  errors.push(_context.t0);\n\n                case 14:\n                  _context.prev = 14;\n                  completed.add(element);\n\n                  if (!isSettled && maybeSettle()) {\n                    cancelPending();\n                  }\n\n                  return _context.finish(14);\n\n                case 18:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[0, 11, 14, 18]]);\n        }))();\n      };\n\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    if (count > elementCount) {\n      reject(new RangeError(\"Expected input to contain at least \".concat(options.count, \" items, but contains \").concat(elementCount, \" items\")));\n      cancelPending();\n    }\n  });\n};\n\nmodule.exports = pSome;\nmodule.exports.AggregateError = AggregateError;\nmodule.exports.FilterError = FilterError;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/p-some/index.js"],"names":["AggregateError","require","PCancelable","FilterError","Error","pSome","iterable","options","resolve","reject","onCancel","count","filter","Number","isFinite","TypeError","values","errors","elementCount","isSettled","completed","Set","maybeSettle","length","cancelPending","promise","has","cancel","element","value","push","add","RangeError","module","exports"],"mappings":"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","sourcesContent":["'use strict';\nconst AggregateError = require('aggregate-error');\nconst PCancelable = require('p-cancelable');\n\nclass FilterError extends Error { }\n\nconst pSome = (iterable, options) => new PCancelable((resolve, reject, onCancel) => {\n\tconst {\n\t\tcount,\n\t\tfilter = () => true\n\t} = options;\n\n\tif (!Number.isFinite(count)) {\n\t\treject(new TypeError(`Expected a finite number, got ${typeof options.count}`));\n\t\treturn;\n\t}\n\n\tconst values = [];\n\tconst errors = [];\n\tlet elementCount = 0;\n\tlet isSettled = false;\n\n\tconst completed = new Set();\n\tconst maybeSettle = () => {\n\t\tif (values.length === count) {\n\t\t\tresolve(values);\n\t\t\tisSettled = true;\n\t\t}\n\n\t\tif (elementCount - errors.length < count) {\n\t\t\treject(new AggregateError(errors));\n\t\t\tisSettled = true;\n\t\t}\n\n\t\treturn isSettled;\n\t};\n\n\tconst cancelPending = () => {\n\t\tfor (const promise of iterable) {\n\t\t\tif (!completed.has(promise) && typeof promise.cancel === 'function') {\n\t\t\t\tpromise.cancel();\n\t\t\t}\n\t\t}\n\t};\n\n\tonCancel(cancelPending);\n\n\tfor (const element of iterable) {\n\t\telementCount++;\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tconst value = await element;\n\n\t\t\t\tif (isSettled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!filter(value)) {\n\t\t\t\t\tthrow new FilterError('Value does not satisfy filter');\n\t\t\t\t}\n\n\t\t\t\tvalues.push(value);\n\t\t\t} catch (error) {\n\t\t\t\terrors.push(error);\n\t\t\t} finally {\n\t\t\t\tcompleted.add(element);\n\n\t\t\t\tif (!isSettled && maybeSettle()) {\n\t\t\t\t\tcancelPending();\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}\n\n\tif (count > elementCount) {\n\t\treject(new RangeError(`Expected input to contain at least ${options.count} items, but contains ${elementCount} items`));\n\t\tcancelPending();\n\t}\n});\n\nmodule.exports = pSome;\nmodule.exports.AggregateError = AggregateError;\nmodule.exports.FilterError = FilterError;\n"]},"metadata":{},"sourceType":"script"}