{"ast":null,"code":"'use strict';\n\nconst PeerId = require('peer-id');\n\nconst multiaddr = require('multiaddr');\n\nconst errCode = require('err-code');\n\nconst {\n  codes\n} = require('./errors');\n/**\n * Converts the given `peer` to a `Peer` object.\n * If a multiaddr is received, the addressBook is updated.\n * @param {PeerId|Multiaddr|string} peer\n * @param {PeerStore} peerStore\n * @returns {{ id: PeerId, multiaddrs: Array<Multiaddr> }}\n */\n\n\nfunction getPeer(peer) {\n  if (typeof peer === 'string') {\n    peer = multiaddr(peer);\n  }\n\n  let addr;\n\n  if (multiaddr.isMultiaddr(peer)) {\n    addr = peer;\n\n    try {\n      peer = PeerId.createFromB58String(peer.getPeerId());\n    } catch (err) {\n      throw errCode(new Error(`${peer} is not a valid peer type`), codes.ERR_INVALID_MULTIADDR);\n    }\n  }\n\n  return {\n    id: peer,\n    multiaddrs: addr ? [addr] : undefined\n  };\n}\n\nmodule.exports = getPeer;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/libp2p/src/get-peer.js"],"names":["PeerId","require","multiaddr","errCode","codes","getPeer","peer","addr","isMultiaddr","createFromB58String","getPeerId","err","Error","ERR_INVALID_MULTIADDR","id","multiaddrs","undefined","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAtB;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,UAAD,CAAvB;;AAEA,MAAM;AAAEG,EAAAA;AAAF,IAAYH,OAAO,CAAC,UAAD,CAAzB;AAEA;;;;;;;;;AAOA,SAASI,OAAT,CAAkBC,IAAlB,EAAwB;AACtB,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5BA,IAAAA,IAAI,GAAGJ,SAAS,CAACI,IAAD,CAAhB;AACD;;AAED,MAAIC,IAAJ;;AACA,MAAIL,SAAS,CAACM,WAAV,CAAsBF,IAAtB,CAAJ,EAAiC;AAC/BC,IAAAA,IAAI,GAAGD,IAAP;;AACA,QAAI;AACFA,MAAAA,IAAI,GAAGN,MAAM,CAACS,mBAAP,CAA2BH,IAAI,CAACI,SAAL,EAA3B,CAAP;AACD,KAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,YAAMR,OAAO,CACX,IAAIS,KAAJ,CAAW,GAAEN,IAAK,2BAAlB,CADW,EAEXF,KAAK,CAACS,qBAFK,CAAb;AAID;AACF;;AAED,SAAO;AACLC,IAAAA,EAAE,EAAER,IADC;AAELS,IAAAA,UAAU,EAAER,IAAI,GAAG,CAACA,IAAD,CAAH,GAAYS;AAFvB,GAAP;AAID;;AAEDC,MAAM,CAACC,OAAP,GAAiBb,OAAjB","sourcesContent":["'use strict'\n\nconst PeerId = require('peer-id')\nconst multiaddr = require('multiaddr')\nconst errCode = require('err-code')\n\nconst { codes } = require('./errors')\n\n/**\n * Converts the given `peer` to a `Peer` object.\n * If a multiaddr is received, the addressBook is updated.\n * @param {PeerId|Multiaddr|string} peer\n * @param {PeerStore} peerStore\n * @returns {{ id: PeerId, multiaddrs: Array<Multiaddr> }}\n */\nfunction getPeer (peer) {\n  if (typeof peer === 'string') {\n    peer = multiaddr(peer)\n  }\n\n  let addr\n  if (multiaddr.isMultiaddr(peer)) {\n    addr = peer\n    try {\n      peer = PeerId.createFromB58String(peer.getPeerId())\n    } catch (err) {\n      throw errCode(\n        new Error(`${peer} is not a valid peer type`),\n        codes.ERR_INVALID_MULTIADDR\n      )\n    }\n  }\n\n  return {\n    id: peer,\n    multiaddrs: addr ? [addr] : undefined\n  }\n}\n\nmodule.exports = getPeer\n"]},"metadata":{},"sourceType":"script"}