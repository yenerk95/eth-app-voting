{"ast":null,"code":"var nextTick = require('./next-tick');\n\nfunction AbstractIterator(db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store');\n  }\n\n  this.db = db;\n  this._ended = false;\n  this._nexting = false;\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  var self = this;\n\n  if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument');\n  }\n\n  if (self._ended) {\n    nextTick(callback, new Error('cannot call next() after end()'));\n    return self;\n  }\n\n  if (self._nexting) {\n    nextTick(callback, new Error('cannot call next() before previous next() has completed'));\n    return self;\n  }\n\n  self._nexting = true;\n\n  self._next(function () {\n    self._nexting = false;\n    callback.apply(null, arguments);\n  });\n\n  return self;\n};\n\nAbstractIterator.prototype._next = function (callback) {\n  nextTick(callback);\n};\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()');\n  }\n\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed');\n  }\n\n  target = this.db._serializeKey(target);\n\n  this._seek(target);\n};\n\nAbstractIterator.prototype._seek = function (target) {};\n\nAbstractIterator.prototype.end = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument');\n  }\n\n  if (this._ended) {\n    return nextTick(callback, new Error('end() already called on iterator'));\n  }\n\n  this._ended = true;\n\n  this._end(callback);\n};\n\nAbstractIterator.prototype._end = function (callback) {\n  nextTick(callback);\n}; // Expose browser-compatible nextTick for dependents\n\n\nAbstractIterator.prototype._nextTick = nextTick;\nmodule.exports = AbstractIterator;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/encoding-down/node_modules/abstract-leveldown/abstract-iterator.js"],"names":["nextTick","require","AbstractIterator","db","TypeError","_ended","_nexting","prototype","next","callback","self","Error","_next","apply","arguments","seek","target","_serializeKey","_seek","end","_end","_nextTick","module","exports"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AAEA,SAASC,gBAAT,CAA2BC,EAA3B,EAA+B;AAC7B,MAAI,OAAOA,EAAP,KAAc,QAAd,IAA0BA,EAAE,KAAK,IAArC,EAA2C;AACzC,UAAM,IAAIC,SAAJ,CAAc,8DAAd,CAAN;AACD;;AAED,OAAKD,EAAL,GAAUA,EAAV;AACA,OAAKE,MAAL,GAAc,KAAd;AACA,OAAKC,QAAL,GAAgB,KAAhB;AACD;;AAEDJ,gBAAgB,CAACK,SAAjB,CAA2BC,IAA3B,GAAkC,UAAUC,QAAV,EAAoB;AACpD,MAAIC,IAAI,GAAG,IAAX;;AAEA,MAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAClC,UAAM,IAAIE,KAAJ,CAAU,qCAAV,CAAN;AACD;;AAED,MAAID,IAAI,CAACL,MAAT,EAAiB;AACfL,IAAAA,QAAQ,CAACS,QAAD,EAAW,IAAIE,KAAJ,CAAU,gCAAV,CAAX,CAAR;AACA,WAAOD,IAAP;AACD;;AAED,MAAIA,IAAI,CAACJ,QAAT,EAAmB;AACjBN,IAAAA,QAAQ,CAACS,QAAD,EAAW,IAAIE,KAAJ,CAAU,yDAAV,CAAX,CAAR;AACA,WAAOD,IAAP;AACD;;AAEDA,EAAAA,IAAI,CAACJ,QAAL,GAAgB,IAAhB;;AACAI,EAAAA,IAAI,CAACE,KAAL,CAAW,YAAY;AACrBF,IAAAA,IAAI,CAACJ,QAAL,GAAgB,KAAhB;AACAG,IAAAA,QAAQ,CAACI,KAAT,CAAe,IAAf,EAAqBC,SAArB;AACD,GAHD;;AAKA,SAAOJ,IAAP;AACD,CAxBD;;AA0BAR,gBAAgB,CAACK,SAAjB,CAA2BK,KAA3B,GAAmC,UAAUH,QAAV,EAAoB;AACrDT,EAAAA,QAAQ,CAACS,QAAD,CAAR;AACD,CAFD;;AAIAP,gBAAgB,CAACK,SAAjB,CAA2BQ,IAA3B,GAAkC,UAAUC,MAAV,EAAkB;AAClD,MAAI,KAAKX,MAAT,EAAiB;AACf,UAAM,IAAIM,KAAJ,CAAU,gCAAV,CAAN;AACD;;AACD,MAAI,KAAKL,QAAT,EAAmB;AACjB,UAAM,IAAIK,KAAJ,CAAU,gDAAV,CAAN;AACD;;AAEDK,EAAAA,MAAM,GAAG,KAAKb,EAAL,CAAQc,aAAR,CAAsBD,MAAtB,CAAT;;AACA,OAAKE,KAAL,CAAWF,MAAX;AACD,CAVD;;AAYAd,gBAAgB,CAACK,SAAjB,CAA2BW,KAA3B,GAAmC,UAAUF,MAAV,EAAkB,CAAE,CAAvD;;AAEAd,gBAAgB,CAACK,SAAjB,CAA2BY,GAA3B,GAAiC,UAAUV,QAAV,EAAoB;AACnD,MAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,UAAM,IAAIE,KAAJ,CAAU,oCAAV,CAAN;AACD;;AAED,MAAI,KAAKN,MAAT,EAAiB;AACf,WAAOL,QAAQ,CAACS,QAAD,EAAW,IAAIE,KAAJ,CAAU,kCAAV,CAAX,CAAf;AACD;;AAED,OAAKN,MAAL,GAAc,IAAd;;AACA,OAAKe,IAAL,CAAUX,QAAV;AACD,CAXD;;AAaAP,gBAAgB,CAACK,SAAjB,CAA2Ba,IAA3B,GAAkC,UAAUX,QAAV,EAAoB;AACpDT,EAAAA,QAAQ,CAACS,QAAD,CAAR;AACD,CAFD,C,CAIA;;;AACAP,gBAAgB,CAACK,SAAjB,CAA2Bc,SAA3B,GAAuCrB,QAAvC;AAEAsB,MAAM,CAACC,OAAP,GAAiBrB,gBAAjB","sourcesContent":["var nextTick = require('./next-tick')\n\nfunction AbstractIterator (db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store')\n  }\n\n  this.db = db\n  this._ended = false\n  this._nexting = false\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  var self = this\n\n  if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument')\n  }\n\n  if (self._ended) {\n    nextTick(callback, new Error('cannot call next() after end()'))\n    return self\n  }\n\n  if (self._nexting) {\n    nextTick(callback, new Error('cannot call next() before previous next() has completed'))\n    return self\n  }\n\n  self._nexting = true\n  self._next(function () {\n    self._nexting = false\n    callback.apply(null, arguments)\n  })\n\n  return self\n}\n\nAbstractIterator.prototype._next = function (callback) {\n  nextTick(callback)\n}\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()')\n  }\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed')\n  }\n\n  target = this.db._serializeKey(target)\n  this._seek(target)\n}\n\nAbstractIterator.prototype._seek = function (target) {}\n\nAbstractIterator.prototype.end = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument')\n  }\n\n  if (this._ended) {\n    return nextTick(callback, new Error('end() already called on iterator'))\n  }\n\n  this._ended = true\n  this._end(callback)\n}\n\nAbstractIterator.prototype._end = function (callback) {\n  nextTick(callback)\n}\n\n// Expose browser-compatible nextTick for dependents\nAbstractIterator.prototype._nextTick = nextTick\n\nmodule.exports = AbstractIterator\n"]},"metadata":{},"sourceType":"script"}