{"ast":null,"code":"var _classCallCheck = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar Fifo = require('fast-fifo');\n\nvar defer = require('p-defer');\n\nmodule.exports = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function PFifo() {\n    _classCallCheck(this, PFifo);\n\n    this._buffer = new Fifo();\n    this._waitingConsumers = new Fifo();\n  }\n\n  _createClass(PFifo, [{\n    key: \"push\",\n    value: function push(chunk) {\n      var _defer = defer(),\n          promise = _defer.promise,\n          resolve = _defer.resolve;\n\n      this._buffer.push({\n        chunk: chunk,\n        resolve: resolve\n      });\n\n      this._consume();\n\n      return promise;\n    }\n  }, {\n    key: \"_consume\",\n    value: function _consume() {\n      while (!this._waitingConsumers.isEmpty() && !this._buffer.isEmpty()) {\n        var nextConsumer = this._waitingConsumers.shift();\n\n        var nextChunk = this._buffer.shift();\n\n        nextConsumer.resolve(nextChunk.chunk);\n        nextChunk.resolve();\n      }\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      var _defer2 = defer(),\n          promise = _defer2.promise,\n          resolve = _defer2.resolve;\n\n      this._waitingConsumers.push({\n        resolve: resolve\n      });\n\n      this._consume();\n\n      return promise;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this._buffer.isEmpty();\n    }\n  }]);\n\n  return PFifo;\n}();","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/p-fifo/index.js"],"names":["Fifo","require","defer","module","exports","_buffer","_waitingConsumers","chunk","promise","resolve","push","_consume","isEmpty","nextConsumer","shift","nextChunk"],"mappings":";;;;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,WAAD,CAApB;;AACA,IAAMC,KAAK,GAAGD,OAAO,CAAC,SAAD,CAArB;;AAEAE,MAAM,CAACC,OAAP;AAAA;;AACE,mBAAe;AAAA;;AACb,SAAKC,OAAL,GAAe,IAAIL,IAAJ,EAAf;AACA,SAAKM,iBAAL,GAAyB,IAAIN,IAAJ,EAAzB;AACD;;AAJH;AAAA;AAAA,yBAMQO,KANR,EAMe;AAAA,mBACkBL,KAAK,EADvB;AAAA,UACHM,OADG,UACHA,OADG;AAAA,UACMC,OADN,UACMA,OADN;;AAEX,WAAKJ,OAAL,CAAaK,IAAb,CAAkB;AAAEH,QAAAA,KAAK,EAALA,KAAF;AAASE,QAAAA,OAAO,EAAPA;AAAT,OAAlB;;AACA,WAAKE,QAAL;;AACA,aAAOH,OAAP;AACD;AAXH;AAAA;AAAA,+BAac;AACV,aAAO,CAAC,KAAKF,iBAAL,CAAuBM,OAAvB,EAAD,IAAqC,CAAC,KAAKP,OAAL,CAAaO,OAAb,EAA7C,EAAqE;AACnE,YAAMC,YAAY,GAAG,KAAKP,iBAAL,CAAuBQ,KAAvB,EAArB;;AACA,YAAMC,SAAS,GAAG,KAAKV,OAAL,CAAaS,KAAb,EAAlB;;AACAD,QAAAA,YAAY,CAACJ,OAAb,CAAqBM,SAAS,CAACR,KAA/B;AACAQ,QAAAA,SAAS,CAACN,OAAV;AACD;AACF;AApBH;AAAA;AAAA,4BAsBW;AAAA,oBACsBP,KAAK,EAD3B;AAAA,UACCM,OADD,WACCA,OADD;AAAA,UACUC,OADV,WACUA,OADV;;AAEP,WAAKH,iBAAL,CAAuBI,IAAvB,CAA4B;AAAED,QAAAA,OAAO,EAAPA;AAAF,OAA5B;;AACA,WAAKE,QAAL;;AACA,aAAOH,OAAP;AACD;AA3BH;AAAA;AAAA,8BA6Ba;AACT,aAAO,KAAKH,OAAL,CAAaO,OAAb,EAAP;AACD;AA/BH;;AAAA;AAAA","sourcesContent":["const Fifo = require('fast-fifo')\nconst defer = require('p-defer')\n\nmodule.exports = class PFifo {\n  constructor () {\n    this._buffer = new Fifo()\n    this._waitingConsumers = new Fifo()\n  }\n\n  push (chunk) {\n    const { promise, resolve } = defer()\n    this._buffer.push({ chunk, resolve })\n    this._consume()\n    return promise\n  }\n\n  _consume () {\n    while (!this._waitingConsumers.isEmpty() && !this._buffer.isEmpty()) {\n      const nextConsumer = this._waitingConsumers.shift()\n      const nextChunk = this._buffer.shift()\n      nextConsumer.resolve(nextChunk.chunk)\n      nextChunk.resolve()\n    }\n  }\n\n  shift () {\n    const { promise, resolve } = defer()\n    this._waitingConsumers.push({ resolve })\n    this._consume()\n    return promise\n  }\n\n  isEmpty () {\n    return this._buffer.isEmpty()\n  }\n}\n"]},"metadata":{},"sourceType":"script"}