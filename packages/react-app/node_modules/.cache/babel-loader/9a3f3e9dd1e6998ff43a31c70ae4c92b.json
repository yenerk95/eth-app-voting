{"ast":null,"code":"'use strict';\n\nconst mh = require('multihashing-async');\n\nconst CID = require('cids');\n\nconst persist = async (buffer, block, options) => {\n  if (!options.codec) {\n    options.codec = 'dag-pb';\n  }\n\n  if (!options.cidVersion) {\n    options.cidVersion = 0;\n  }\n\n  if (!options.hashAlg) {\n    options.hashAlg = 'sha2-256';\n  }\n\n  if (options.hashAlg !== 'sha2-256') {\n    options.cidVersion = 1;\n  }\n\n  const multihash = await mh(buffer, options.hashAlg);\n  const cid = new CID(options.cidVersion, options.codec, multihash);\n\n  if (!options.onlyHash) {\n    await block.put(buffer, { ...options,\n      cid\n    });\n  }\n\n  return cid;\n};\n\nmodule.exports = persist;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/ipfs-unixfs-importer/src/utils/persist.js"],"names":["mh","require","CID","persist","buffer","block","options","codec","cidVersion","hashAlg","multihash","cid","onlyHash","put","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,oBAAD,CAAlB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,MAAD,CAAnB;;AAEA,MAAME,OAAO,GAAG,OAAOC,MAAP,EAAeC,KAAf,EAAsBC,OAAtB,KAAkC;AAChD,MAAI,CAACA,OAAO,CAACC,KAAb,EAAoB;AAClBD,IAAAA,OAAO,CAACC,KAAR,GAAgB,QAAhB;AACD;;AAED,MAAI,CAACD,OAAO,CAACE,UAAb,EAAyB;AACvBF,IAAAA,OAAO,CAACE,UAAR,GAAqB,CAArB;AACD;;AAED,MAAI,CAACF,OAAO,CAACG,OAAb,EAAsB;AACpBH,IAAAA,OAAO,CAACG,OAAR,GAAkB,UAAlB;AACD;;AAED,MAAIH,OAAO,CAACG,OAAR,KAAoB,UAAxB,EAAoC;AAClCH,IAAAA,OAAO,CAACE,UAAR,GAAqB,CAArB;AACD;;AAED,QAAME,SAAS,GAAG,MAAMV,EAAE,CAACI,MAAD,EAASE,OAAO,CAACG,OAAjB,CAA1B;AACA,QAAME,GAAG,GAAG,IAAIT,GAAJ,CAAQI,OAAO,CAACE,UAAhB,EAA4BF,OAAO,CAACC,KAApC,EAA2CG,SAA3C,CAAZ;;AAEA,MAAI,CAACJ,OAAO,CAACM,QAAb,EAAuB;AACrB,UAAMP,KAAK,CAACQ,GAAN,CAAUT,MAAV,EAAkB,EACtB,GAAGE,OADmB;AAEtBK,MAAAA;AAFsB,KAAlB,CAAN;AAID;;AAED,SAAOA,GAAP;AACD,CA5BD;;AA8BAG,MAAM,CAACC,OAAP,GAAiBZ,OAAjB","sourcesContent":["'use strict'\n\nconst mh = require('multihashing-async')\nconst CID = require('cids')\n\nconst persist = async (buffer, block, options) => {\n  if (!options.codec) {\n    options.codec = 'dag-pb'\n  }\n\n  if (!options.cidVersion) {\n    options.cidVersion = 0\n  }\n\n  if (!options.hashAlg) {\n    options.hashAlg = 'sha2-256'\n  }\n\n  if (options.hashAlg !== 'sha2-256') {\n    options.cidVersion = 1\n  }\n\n  const multihash = await mh(buffer, options.hashAlg)\n  const cid = new CID(options.cidVersion, options.codec, multihash)\n\n  if (!options.onlyHash) {\n    await block.put(buffer, {\n      ...options,\n      cid\n    })\n  }\n\n  return cid\n}\n\nmodule.exports = persist\n"]},"metadata":{},"sourceType":"script"}