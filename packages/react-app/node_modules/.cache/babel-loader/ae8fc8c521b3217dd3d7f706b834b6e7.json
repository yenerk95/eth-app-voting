{"ast":null,"code":"var _jsxFileName = \"/Users/yenerkaraca/Documents/GitHub/eth-app-voting/packages/react-app/src/App.js\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport logo from \"./ethereumLogo.png\";\nimport { addresses, abis } from \"@project/contracts\";\nimport \"./App.css\";\nconst ZERO_ADDRESS = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\nconst defaultProvider = new ethers.providers.Web3Provider(window.ethereum);\nvar storageContract;\n\nasync function getaccount() {\n  const accounts = await window.ethereum.request({\n    method: 'eth_requestAccounts'\n  });\n  Object.values(accounts);\n  const account = JSON.stringify(accounts[0]);\n  console.log(\"FUNC\");\n  console.log({\n    account\n  });\n  return account;\n}\n\nfunction App() {\n  const [accountHash, setAccountHash] = useState(\"\");\n  useEffect(() => {\n    window.ethereum.enable();\n  }, []);\n  useEffect(() => {\n    async function readFile() {\n      const file1 = await getaccount();\n      if (file1 !== ZERO_ADDRESS) setAccountHash(file1);\n    }\n\n    readFile();\n  }, []);\n\n  function SetContract() {\n    storageContract = new ethers.Contract(itemInput2, abis.storage, defaultProvider);\n    console.log(itemInput2);\n    console.log(abis.storage);\n    console.log(storageContract);\n\n    try {\n      if (itemInput2 == \"\") throw \"Empty! Enter Smart Contract Hash.\";\n      if (isNaN(itemInput2)) throw \"Not a number! Enter Smart Contract Hash.\";\n    } catch (err) {\n      console.log(err);\n      document.getElementById(\"text-box\").className = \"color-red\";\n      document.getElementById(\"text-box\").innerHTML = err;\n    }\n\n    return storageContract;\n  }\n\n  async function Buyer() {\n    try {\n      const storageWithSigner = storageContract.connect(defaultProvider.getSigner());\n      await storageWithSigner.buyerUpload(1, itemInput);\n    } catch (err) {\n      console.log(err.message);\n      document.getElementById(\"text-box\").className = \"color-red\";\n      document.getElementById(\"text-box\").innerHTML = err.message;\n    }\n  }\n\n  async function status() {\n    var status_array = [\"ON\", \"BUYER_UPLOADED\", \"SELLER_UPLOADED\", \"DOC_OK\", \"DOC_DEFECT\", \"DOC_REJECTED\"];\n    var time_array = [\"ON_TIME\", \"OUT_OF_TIME\"];\n\n    try {\n      const storageWithSigner = storageContract.connect(defaultProvider.getSigner());\n      var balance = await storageWithSigner.check_Contract_Balance();\n      var statust = await storageWithSigner.getStatus();\n      var timet = await storageWithSigner.getTimeStatus();\n      document.getElementById(\"text-box1\").innerHTML = \"Status: \" + status_array[statust] + \"  Time: \" + time_array[timet] + \"  Balance: \" + balance;\n      return;\n    } catch (err) {\n      console.log(err.message);\n      document.getElementById(\"text-box\").className = \"color-red\";\n      document.getElementById(\"text-box\").innerHTML = err.message;\n    }\n  }\n\n  const [itemInput, setItemInput] = useState(\"\");\n  console.log(itemInput);\n  const [itemInput1, setItemInput1] = useState(\"\");\n  console.log(itemInput1);\n  const [itemInput2, setItemInput2] = useState(\"\");\n  console.log(itemInput2);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"App-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"text-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"body\", {\n    className: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 8\n    }\n  }, \"Smart Contract: \", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Contract Hash\",\n    value: itemInput2,\n    onChange: e => setItemInput2(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: SetContract,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, \"Set\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, \"Current User Hash: \", /*#__PURE__*/React.createElement(\"mark\", {\n    className: \"mark-red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 31\n    }\n  }, accountHash)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    onClick: status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, \"See Current Status\"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"text-box1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"body\", {\n    className: \"buyer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app-voting/packages/react-app/src/App.js"],"names":["React","useCallback","useEffect","useState","ethers","logo","addresses","abis","ZERO_ADDRESS","defaultProvider","providers","Web3Provider","window","ethereum","storageContract","getaccount","accounts","request","method","Object","values","account","JSON","stringify","console","log","App","accountHash","setAccountHash","enable","readFile","file1","SetContract","Contract","itemInput2","storage","isNaN","err","document","getElementById","className","innerHTML","Buyer","storageWithSigner","connect","getSigner","buyerUpload","itemInput","message","status","status_array","time_array","balance","check_Contract_Balance","statust","getStatus","timet","getTimeStatus","setItemInput","itemInput1","setItemInput1","setItemInput2","e","target","value"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\n\nimport { ethers } from \"ethers\";\n\nimport logo from \"./ethereumLogo.png\";\nimport { addresses, abis } from \"@project/contracts\";\n\nimport \"./App.css\";\n\nconst ZERO_ADDRESS =\n  \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n\n\nconst defaultProvider = new ethers.providers.Web3Provider(window.ethereum);\nvar storageContract;\n\nasync function getaccount(){\n  const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n  Object.values(accounts);\n  const account =JSON.stringify(accounts[0]);\n  console.log(\"FUNC\");\n\n  console.log({ account });\n\nreturn account\n}\n\n\nfunction App() {\n  \n\n  const [accountHash, setAccountHash] = useState(\"\");\n  useEffect(() => {\n    window.ethereum.enable();\n  }, []);\n\n  useEffect(() => {\n    async function readFile() {\n      const file1 = await getaccount();\n\n      if (file1 !== ZERO_ADDRESS) setAccountHash(file1);\n    }\n     \n    readFile();\n  }, []);\n\n\n   function SetContract() {\n    storageContract = new ethers.Contract(itemInput2, abis.storage, defaultProvider);\n    console.log(itemInput2);\n    console.log(abis.storage);\n    console.log(storageContract);\n\n      \n    try {\n      if(itemInput2== \"\") throw \"Empty! Enter Smart Contract Hash.\";\n      if(isNaN(itemInput2)) throw \"Not a number! Enter Smart Contract Hash.\";\n      \n    }\n    catch(err) {\n      console.log(err);\n      document.getElementById(\"text-box\").className = \"color-red\";\n\n      document.getElementById(\"text-box\").innerHTML = err\n    }\n     \n    return storageContract;\n  \n  }\n\n\n  async function Buyer() {\n\n  \n    try {\n      const storageWithSigner = storageContract.connect(defaultProvider.getSigner());\n      await storageWithSigner.buyerUpload(1,itemInput);\n      \n    }\n    catch(err) {\n      console.log(err.message);\n      document.getElementById(\"text-box\").className = \"color-red\";\n      document.getElementById(\"text-box\").innerHTML = err.message\n    }\n    \n  \n  }\n\n\n\n\n\n  async function status() {\n\n    var status_array=[\"ON\", \"BUYER_UPLOADED\", \"SELLER_UPLOADED\", \"DOC_OK\", \"DOC_DEFECT\", \"DOC_REJECTED\"];\n    var time_array=[\"ON_TIME\", \"OUT_OF_TIME\"];\n\n\n    try {\n      const storageWithSigner = storageContract.connect(defaultProvider.getSigner());\n\n      var balance = await storageWithSigner.check_Contract_Balance();\n\n      var statust = await storageWithSigner.getStatus();\n\n      var timet = await storageWithSigner.getTimeStatus();\n\n      document.getElementById(\"text-box1\").innerHTML = \"Status: \"+status_array[statust] +\"  Time: \"+ time_array[timet] +\"  Balance: \"+ balance\n      return \n      \n    }\n    catch(err) {\n      console.log(err.message);\n      document.getElementById(\"text-box\").className = \"color-red\";\n      document.getElementById(\"text-box\").innerHTML = err.message\n    }\n    \n    \n  \n  }\n\n\n\n  \n\n\n  \n\n\n  const [itemInput, setItemInput] = useState(\"\");\n  console.log(itemInput);\n  const [itemInput1, setItemInput1] = useState(\"\");\n  console.log(itemInput1);\n  const [itemInput2, setItemInput2] = useState(\"\");\n  console.log(itemInput2);\n \n  \n\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n       <div id=\"text-box\"></div>\n       <body className=\"info\">\n       <div>\n          Smart Contract: <input type=\"text\" placeholder=\"Contract Hash\" value={itemInput2} onChange={e => setItemInput2(e.target.value)}/>\n        <button onClick={SetContract}>Set</button>\n        </div>\n      <div>Current User Hash: <mark className=\"mark-red\">{accountHash}</mark></div>\n\n      <div> <button onClick={status}>See Current Status</button> </div>\n      \n      <div id=\"text-box1\"></div>\n      </body>\n\n        <body className=\"buyer\">\n        \n\n         </body>\n\n\n\n      </header>\n\n    </div>\n  );\n \n  \n}\n\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}