{"ast":null,"code":"'use strict'; // load websocket library if we are not in the browser\n\nvar WebSocket = require('./web-socket');\n\nvar duplex = require('./duplex');\n\nvar wsurl = require('./ws-url');\n\nmodule.exports = function (addr) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var location = typeof window === 'undefined' ? {} : window.location;\n  var url = wsurl(addr, location);\n  var socket = new WebSocket(url, opts.websocket);\n  var stream = duplex(socket, opts);\n  stream.remoteAddress = url;\n\n  stream.close = function () {\n    return new Promise(function (resolve, reject) {\n      socket.addEventListener('close', resolve);\n      socket.close();\n    });\n  };\n\n  stream.destroy = function () {\n    socket.terminate();\n  };\n\n  stream.socket = socket;\n  return stream;\n};\n\nmodule.exports.connect = module.exports;","map":{"version":3,"sources":["/Users/yenerkaraca/Documents/GitHub/eth-app/node_modules/it-ws/client.js"],"names":["WebSocket","require","duplex","wsurl","module","exports","addr","opts","location","window","url","socket","websocket","stream","remoteAddress","close","Promise","resolve","reject","addEventListener","destroy","terminate","connect"],"mappings":"AAAA,a,CAEA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,cAAD,CAAvB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,UAAD,CAApB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,UAAD,CAAnB;;AAEAG,MAAM,CAACC,OAAP,GAAiB,UAAUC,IAAV,EAA2B;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AAC1C,MAAMC,QAAQ,GAAG,OAAOC,MAAP,KAAkB,WAAlB,GAAgC,EAAhC,GAAqCA,MAAM,CAACD,QAA7D;AAEA,MAAME,GAAG,GAAGP,KAAK,CAACG,IAAD,EAAOE,QAAP,CAAjB;AACA,MAAMG,MAAM,GAAG,IAAIX,SAAJ,CAAcU,GAAd,EAAmBH,IAAI,CAACK,SAAxB,CAAf;AAEA,MAAMC,MAAM,GAAGX,MAAM,CAACS,MAAD,EAASJ,IAAT,CAArB;AACAM,EAAAA,MAAM,CAACC,aAAP,GAAuBJ,GAAvB;;AACAG,EAAAA,MAAM,CAACE,KAAP,GAAe;AAAA,WAAM,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpDP,MAAAA,MAAM,CAACQ,gBAAP,CAAwB,OAAxB,EAAiCF,OAAjC;AACAN,MAAAA,MAAM,CAACI,KAAP;AACD,KAHoB,CAAN;AAAA,GAAf;;AAIAF,EAAAA,MAAM,CAACO,OAAP,GAAiB,YAAM;AACrBT,IAAAA,MAAM,CAACU,SAAP;AACD,GAFD;;AAGAR,EAAAA,MAAM,CAACF,MAAP,GAAgBA,MAAhB;AAEA,SAAOE,MAAP;AACD,CAlBD;;AAoBAT,MAAM,CAACC,OAAP,CAAeiB,OAAf,GAAyBlB,MAAM,CAACC,OAAhC","sourcesContent":["'use strict'\n\n// load websocket library if we are not in the browser\nvar WebSocket = require('./web-socket')\nvar duplex = require('./duplex')\nvar wsurl = require('./ws-url')\n\nmodule.exports = function (addr, opts = {}) {\n  const location = typeof window === 'undefined' ? {} : window.location\n\n  const url = wsurl(addr, location)\n  const socket = new WebSocket(url, opts.websocket)\n\n  const stream = duplex(socket, opts)\n  stream.remoteAddress = url\n  stream.close = () => new Promise((resolve, reject) => {\n    socket.addEventListener('close', resolve)\n    socket.close()\n  })\n  stream.destroy = () => {\n    socket.terminate()\n  }\n  stream.socket = socket\n\n  return stream\n}\n\nmodule.exports.connect = module.exports\n"]},"metadata":{},"sourceType":"script"}